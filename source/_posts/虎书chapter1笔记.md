---
title: 虎书chapter1笔记
date: 2020-12-17 19:33:43
tags: 图形学
---

<escape><!--more--></escape>

# 虎书chapter1笔记

虎书侧重于对于基础原理的讲解，而非具体的图形学API

### 1.1 图形学领域

主要分成三个主要领域：

- 建模
- 渲染
- 模拟

图形学相关领域：

- 人机交互
- 虚拟现实
- 可视化
- 图像处理
- 3D扫描
- 计算摄影

### 1.2 主要应用

主要应用如下：

- 视频游戏
- 动漫
- 视觉效果
- 动画电影
- 计算机辅助设计/制造
- 模拟
- 医疗影像
- 信息可视化

### 1.3 图形学API

主要分为两种：用于视觉输出的图形API和获取用户输入的用户界面API

当前API分为两种：

- 集成方法，可移植
- Direct3D和openGL，可移植是可能有问题的

不管API的使用如何，底层图形学原理都是相似的。

### 1.4 图形学管道

​	3D图形管道可以有效绘制3D图元，是在4D坐标空间里完成的。4D坐标空间是学习图形学的最大智力障碍。

### 1.5 数值问题

IEEE 浮点数标准，有三种特殊实数：

- 无穷
- 负无穷
- NaN

跟以上三种特殊实数相关的计算：
$$
+a/(+\infty)=+0\\\\
-a/(+\infty)=-0\\\\
+a/(-\infty)=-0\\\\
-a/(-\infty)=+0\\\\
\infty+\infty=\infty\\\\
\infty-\infty=NaN\\\\
\infty*\infty=\infty\\\\
\infty/\infty=NaN\\\\
\infty/a=\infty\\\\
\infty/0=\infty\\\\
0/0=NaN\\\\
+a/+0=+\infty\\\\
-a/+0=-\infty
$$
对于无穷有以下规则：

1. 所有合法实数小于无穷
2. 所有合法实数大于负无穷
3. 负无穷小于正无穷

对于NaN有以下规则：

1. 所有数值计算有NaN参与的结果为NaN
2. 所有**布尔判断**有NaN参与结果为false

### 1.6 效率

应当注重内存访问效率的优化

加快编码速度的推荐步骤如下：

1. 尽可能直接的写出代码，即时计算中间结果，而不是存储他们
2. 在优化模式下编译
3. 用性能优化工具去找到关键性能瓶颈
4. 使用数据结构检查可优化的位置。如果可能的话，让数据单元的大小和缓存页面的大小保持一致。
5. 如果分析找到了数值计算的瓶颈，请检查汇编代码，并重写源代码以解决发现的任何问题。

### 1.7 设计和编写图形学程序

KISS（“keep it simple, stupid”）原则

#### 1.7.1 类的设计

一些例子：

- vector2
- vector3
- hvector
- rgb
- transform
- image

#### 1.7.2 单精度/双精度浮点数

​	从减少内存使用且内存访问方式一致的角度考虑，推荐使用单精度浮点数。但是从减少数值计算问题的角度考虑，推荐使用双精度浮点数。这需要程序对所要求解的问题进行权衡。

​	作者推荐使用双精度浮点数做几何运算处理，用单精度浮点数做颜色计算。对于需要大量内存的数据，如三角面片，推荐使用单精度浮点数，但是在成员函数访问的时候转换成双精度浮点数。

#### 1.7.3 图形学程序的调试

​	作者推荐采用传统的调试方法，先观察输出图像的问题，分析可能导致该问题的原因并一一进行测试。

​	在调试输出中可以使用图像进行直观的中间变量的呈现。

​	调试中一个很有效的办法是“set a trap”，首先保证程序是确定性的（消除随机性因素，如固定随机种子等），其次在会出问题的地方进行输出调试/断点调试。

​	如果程序出现了崩溃的情况，推荐使用断言的方式对程序问题进行排查。

​	为自己的程序做好方便理解的图解，进行格式化输出调试。

#### 





